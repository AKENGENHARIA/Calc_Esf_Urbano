<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Esforço Urbano</title>
    <link rel="shortcut icon" href="Sem título2.png" type="image/x-icon">
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <script src="https://unpkg.com/pdf-lib@1.16.0/dist/pdf-lib.min.js"></script>



    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .cabecalho ul {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .cabecalho ul a {
            text-decoration: none;
            font-weight: 900;
            color: black;
            border-bottom: solid 2px;
        }

        .cabecalho ul a:hover {
            color: red;
            font-size: 20px;
        }

        h1 {
            color: #0044cc;
            margin-top: 20px;
            text-align: center;
        }

        .container {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1200px;
            margin: 20px 0;
        }

        .force-input {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            padding: 15px;
            width: 180px;
            box-sizing: border-box;
            min-width: 150px;
        }

        .force-input h3 {
            color: #0044cc;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .vao-ang,
        .RedeDentrega,
        .estaio,
        .usoMutuo {
            margin-bottom: 10px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 12px;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 6px;
            margin-bottom: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 12px;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .buttons button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            background-color: #0044cc;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .buttons button:hover {
            background-color: #0033a0;
        }

        .results {
            margin-top: 20px;
            text-align: center;
        }

        .results .value {
            font-size: 20px;
            font-weight: bold;
            color: #0044cc;
        }

        .chart {
            margin-top: 30px;
            width: 100%;
            max-width: 500px;
        }
    </style>
</head>

<body>
    <header class="cabecalho">
        <ul>
            <a href="">Informação</a>
            <a href="">Poste</a>
            <a href="">Calculo</a>
        </ul>
    </header>
    <h1>Calculadora de Esforço Urbano</h1>
    <div class="container">
        <!-- Layout Força 1 -->
        <div class="force-input" id="F1">
            <h3>FORÇA 1</h3>
            <section class="vao-ang">
                <label for="span1_F1">Vão:</label>
                <input type="number" id="span1_F1" value="">
                <label for="angle1_F1">Ângulo:</label>
                <input type="number" id="angle1_F1" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F1" id="rede_mt_F1">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
                <p>Rede BT</p>
                <select name="rede_bt_F1" id="rede_bt_F1">
                    <option value="0">Selecione</option>
                    <option value="114">2x1x35+70</option>
                    <option value="181">2x1x70+70</option>
                    <option value="161">3x1x35+70</option>
                    <option value="245">3x1x70+70</option>
                    <option value="381">3x1x120+70</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4(4)</option>
                    <option value="174">3#4(4)</option>
                    <option value="92">1#2</option>
                    <option value="183">2#2(4)</option>
                    <option value="184">2#2(2)</option>
                    <option value="275">3#2(4)</option>
                    <option value="276">3#2(2)</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0(2)</option>
                    <option value="435">3#1/0(2)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0(1/0)</option>
                    <option value="879">3#4/0(1/0)</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336(4/0)</option>
                    <option value="1401">3#336(4/0)</option>
                </select>
                <p>Nível da cruzeta MT</p>
                <select name="nivel_cruzeta_mt_F1" id="nivel_cruzeta_mt_F1">
                    <option value="1">NIVEL 1</option>
                    <option value="0.96">NIVEL 2</option>
                    <option value="0.86">NIVEL 3</option>
                </select>
            </div>
            <section class="estaio">
                <h3>Estaio</h3>

                <input type="radio">Sim
                <input type="radio">Não
                <select id="estaio_F1">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
                <input type="number">
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F1">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>

        <!-- Layout Força 2 -->
        <div class="force-input" id="F2">
            <h3>FORÇA 2</h3>
            <section class="vao-ang">
                <label for="span1_F2">Vão:</label>
                <input type="number" id="span1_F2" value="">
                <label for="angle2_F2">Ângulo:</label>
                <input type="number" id="angle2_F2" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F2" id="rede_mt_F2">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
                <p>Rede BT</p>
                <select name="rede_bt_F2" id="rede_bt_F2">
                    <option value="0">Selecione</option>
                    <option value="114">2x1x35+70</option>
                    <option value="181">2x1x70+70</option>
                    <option value="161">3x1x35+70</option>
                    <option value="245">3x1x70+70</option>
                    <option value="381">3x1x120+70</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4(4)</option>
                    <option value="174">3#4(4)</option>
                    <option value="92">1#2</option>
                    <option value="183">2#2(4)</option>
                    <option value="184">2#2(2)</option>
                    <option value="275">3#2(4)</option>
                    <option value="276">3#2(2)</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0(2)</option>
                    <option value="435">3#1/0(2)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0(1/0)</option>
                    <option value="879">3#4/0(1/0)</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336(4/0)</option>
                    <option value="1401">3#336(4/0)</option>
                </select>
                <p>Nível da cruzeta MT</p>
                <select name="nivel_cruzeta_mt_F2" id="nivel_cruzeta_mt_F2">
                    <option value="1">NIVEL 1</option>
                    <option value="0.96">NIVEL 2</option>
                    <option value="0.86">NIVEL 3</option>
                </select>
            </div>
            <section class="estaio">
                <h3>Estaio</h3>
                <input type="radio">Sim
                <input type="radio">Não
                <select id="estaio_F2">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F2">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>

        <!-- Layout Força 3 -->
        <div class="force-input" id="F3">
            <h3>FORÇA 3</h3>
            <section class="vao-ang">
                <label for="span1_F3">Vão:</label>
                <input type="number" id="span1_F3" value="">
                <label for="angle1_F3">Ângulo:</label>
                <input type="number" id="angle1_F3" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F3" id="rede_mt_F3">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
            </div>
            <p>Rede BT</p>
            <select name="rede_bt_F3" id="rede_bt_F3">
                <option value="0">Selecione</option>
                <option value="114">2x1x35+70</option>
                <option value="181">2x1x70+70</option>
                <option value="161">3x1x35+70</option>
                <option value="245">3x1x70+70</option>
                <option value="381">3x1x120+70</option>
                <option value="58">1#4</option>
                <option value="116">2#4(4)</option>
                <option value="174">3#4(4)</option>
                <option value="92">1#2</option>
                <option value="183">2#2(4)</option>
                <option value="184">2#2(2)</option>
                <option value="275">3#2(4)</option>
                <option value="276">3#2(2)</option>
                <option value="145">1#1/0</option>
                <option value="290">2#1/0(2)</option>
                <option value="435">3#1/0(2)</option>
                <option value="293">1#4/0</option>
                <option value="586">2#4/0(1/0)</option>
                <option value="879">3#4/0(1/0)</option>
                <option value="467">1#336</option>
                <option value="934">2#336(4/0)</option>
                <option value="1401">3#336(4/0)</option>
            </select>
            <p>Nível da cruzeta MT</p>
            <select name="nivel_cruzeta_mt_F3" id="nivel_cruzeta_mt_F3">
                <option value="1">NIVEL 1</option>
                <option value="0.96">NIVEL 2</option>
                <option value="0.86">NIVEL 3</option>
            </select>
            <section class="estaio">
                <h3>Estaio</h3>
                <input type="radio">Sim
                <input type="radio">Não
                <select id="estaio_F3">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F3">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>

        <!-- Layout Força 4 -->
        <div class="force-input" id="F4">
            <h3>FORÇA 4</h3>
            <section class="vao-ang">
                <label for="span1_F4">Vão:</label>
                <input type="number" id="span1_F4" value="0">
                <label for="angle1_F4">Ângulo:</label>
                <input type="number" id="angle1_F4" value="0">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F4" id="rede_mt_F4">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
            </div>
            <p>Rede BT</p>
            <select name="rede_bt_F4" id="rede_bt_F4">
                <option value="0">Selecione</option>
                <option value="114">2x1x35+70</option>
                <option value="181">2x1x70+70</option>
                <option value="161">3x1x35+70</option>
                <option value="245">3x1x70+70</option>
                <option value="381">3x1x120+70</option>
                <option value="58">1#4</option>
                <option value="116">2#4(4)</option>
                <option value="174">3#4(4)</option>
                <option value="92">1#2</option>
                <option value="183">2#2(4)</option>
                <option value="184">2#2(2)</option>
                <option value="275">3#2(4)</option>
                <option value="276">3#2(2)</option>
                <option value="145">1#1/0</option>
                <option value="290">2#1/0(2)</option>
                <option value="435">3#1/0(2)</option>
                <option value="293">1#4/0</option>
                <option value="586">2#4/0(1/0)</option>
                <option value="879">3#4/0(1/0)</option>
                <option value="467">1#336</option>
                <option value="934">2#336(4/0)</option>
                <option value="1401">3#336(4/0)</option>
            </select>
            <p>Nível da cruzeta MT</p>
            <select name="nivel_cruzeta_mt_F4" id="nivel_cruzeta_mt_F4">
                <option value="1">NIVEL 1</option>
                <option value="0.96">NIVEL 2</option>
                <option value="0.86">NIVEL 3</option>
            </select>
            <section class="estaio">
                <h3>Estaio</h3>
                <input type="radio">Sim
                <input type="radio">Não
                <label>
                    <input type="radio" name="estaio_F4" value="sim" id="estaio_sim_F4"> Sim
                </label>
                <div id="estaio_options_F4" class="hidden">
                    <select id="estaio_F4" disabled>
                        <option value="opcao1">Opção 1</option>
                        <option value="opcao2">Opção 2</option>
                    </select>
                    <label for="valor_estaio_F4">Valor:</label>
                    <input type="number" id="valor_estaio_F4" disabled>
                </div>
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F4">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>


        <!-- Layout Força 5 -->
        <div class="force-input" id="F5">
            <h3>FORÇA 5</h3>
            <section class="vao-ang">
                <label for="span1_F5">Vão:</label>
                <input type="number" id="span1_F5" value="0">
                <label for="angle1_F5">Ângulo:</label>
                <input type="number" id="angle1_F5" value="0">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F5" id="rede_mt_F5">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
            </div>
            <p>Rede BT</p>
            <select name="rede_bt_F5" id="rede_bt_F5">
                <option value="0">Selecione</option>
                <option value="114">2x1x35+70</option>
                <option value="181">2x1x70+70</option>
                <option value="161">3x1x35+70</option>
                <option value="245">3x1x70+70</option>
                <option value="381">3x1x120+70</option>
                <option value="58">1#4</option>
                <option value="116">2#4(4)</option>
                <option value="174">3#4(4)</option>
                <option value="92">1#2</option>
                <option value="183">2#2(4)</option>
                <option value="184">2#2(2)</option>
                <option value="275">3#2(4)</option>
                <option value="276">3#2(2)</option>
                <option value="145">1#1/0</option>
                <option value="290">2#1/0(2)</option>
                <option value="435">3#1/0(2)</option>
                <option value="293">1#4/0</option>
                <option value="586">2#4/0(1/0)</option>
                <option value="879">3#4/0(1/0)</option>
                <option value="467">1#336</option>
                <option value="934">2#336(4/0)</option>
                <option value="1401">3#336(4/0)</option>
            </select>
            <p>Nível da cruzeta MT</p>
            <select name="nivel_cruzeta_mt_F5" id="nivel_cruzeta_mt_F5">
                <option value="1">NIVEL 1</option>
                <option value="0.96">NIVEL 2</option>
                <option value="0.86">NIVEL 3</option>
            </select>
            <section class="estaio">
                <h3>Estaio</h3>
                <input type="radio">Sim
                <input type="radio">Não
                <select id="estaio_F5">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F5">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>
    </div>

    <!-- Buttons -->
    <div id="buttons">
        <button type="button" id="calculate">Calcular</button>
        <button type="button" id="clear">Limpar</button>
    </div>
    <div class="buttons">
        <button id="generatePdf">Gerar PDF</button>
    </div>

    </form>
    <div id="resultado"></div>

    <script>

        document.addEventListener('DOMContentLoaded', function () {
            var btn = document.getElementById('calculate');
            btn.addEventListener('click', function () {
                // Força 1
                let ang1 = parseFloat(document.getElementById('angle1_F1')?.value) || 0;
                let redeMt1 = parseFloat(document.getElementById('rede_mt_F1')?.value) || 0;
                let redeBt1 = parseFloat(document.getElementById('rede_bt_F1')?.value) || 0;
                let nivelMt1 = parseFloat(document.getElementById('nivel_cruzeta_mt_F1')?.value) || 0;

                let somaF1 = (redeMt1 * nivelMt1) + redeBt1;
                let rad1 = ang1 * Math.PI / 180;
                let x1 = somaF1 * Math.cos(rad1);
                let y1 = somaF1 * Math.sin(rad1);

                // Força 2
                let ang2 = parseFloat(document.getElementById('angle2_F2')?.value) || 0;
                let redeMt2 = parseFloat(document.getElementById('rede_mt_F2')?.value) || 0;
                let redeBt2 = parseFloat(document.getElementById('rede_bt_F2')?.value) || 0;
                let nivelMt2 = parseFloat(document.getElementById('nivel_cruzeta_mt_F2')?.value) || 0;

                let somaF2 = (redeMt2 * nivelMt2) + redeBt2;
                let rad2 = ang2 * Math.PI / 180;
                let x2 = somaF2 * Math.cos(rad2);
                let y2 = somaF2 * Math.sin(rad2);

                // Força 3
                let ang3 = parseFloat(document.getElementById('angle3_F3')?.value) || 0;
                let redeMt3 = parseFloat(document.getElementById('rede_mt_F3')?.value) || 0;
                let redeBt3 = parseFloat(document.getElementById('rede_bt_F3')?.value) || 0;
                let nivelMt3 = parseFloat(document.getElementById('nivel_cruzeta_mt_F3')?.value) || 0;

                let somaF3 = (redeMt3 * nivelMt3) + redeBt3;
                let rad3 = ang3 * Math.PI / 180;
                let x3 = somaF3 * Math.cos(rad3);
                let y3 = somaF3 * Math.sin(rad3);

                // Força 4
                let ang4 = parseFloat(document.getElementById('angle4_F4')?.value) || 0;
                let redeMt4 = parseFloat(document.getElementById('rede_mt_F4')?.value) || 0;
                let redeBt4 = parseFloat(document.getElementById('rede_bt_F4')?.value) || 0;
                let nivelMt4 = parseFloat(document.getElementById('nivel_cruzeta_mt_F4')?.value) || 0;

                let somaF4 = (redeMt4 * nivelMt4) + redeBt4;
                let rad4 = ang4 * Math.PI / 180;
                let x4 = somaF4 * Math.cos(rad4);
                let y4 = somaF4 * Math.sin(rad4);

                // Força 5
                let ang5 = parseFloat(document.getElementById('angle5_F5')?.value) || 0;
                let redeMt5 = parseFloat(document.getElementById('rede_mt_F5')?.value) || 0;
                let redeBt5 = parseFloat(document.getElementById('rede_bt_F5')?.value) || 0;
                let nivelMt5 = parseFloat(document.getElementById('nivel_cruzeta_mt_F5')?.value) || 0;

                let somaF5 = (redeMt5 * nivelMt5) + redeBt5;
                let rad5 = ang5 * Math.PI / 180;
                let x5 = somaF5 * Math.cos(rad5);
                let y5 = somaF5 * Math.sin(rad5);

                // Calcula o vetor resultante
                let xResultante = x1 + x2 + x3 + x4 + x5;
                let yResultante = y1 + y2 + y3 + y4 + y5;

                const magnitudeResultante = Math.sqrt(xResultante * xResultante + yResultante * yResultante);
                const anguloResultante = Math.atan2(yResultante, xResultante) * 180 / Math.PI;

                // Armazena os dados para o PDF
                window.pdfData = {
                    forcas: [
                        { numero: 1, angulo: ang1, magnitude: somaF1, x: x1, y: y1 },
                        { numero: 2, angulo: ang2, magnitude: somaF2, x: x2, y: y2 },
                        { numero: 3, angulo: ang3, magnitude: somaF3, x: x3, y: y3 },
                        { numero: 4, angulo: ang4, magnitude: somaF4, x: x4, y: y4 },
                        { numero: 5, angulo: ang5, magnitude: somaF5, x: x5, y: y5 }
                    ],
                    magnitude: magnitudeResultante,
                    anguloResultante: anguloResultante
                };

                // Atualiza a div com resultados
                document.getElementById('resultado').innerHTML = `
            <h3>Resultados das Forças</h3>
            ${window.pdfData.forcas.map(f => `
                <h4>Força ${f.numero}</h4>
                <p>Ângulo: ${f.angulo}°</p>
                <p>Magnitude: ${f.magnitude.toFixed(2)}</p>
                <p>Componente X: ${f.x.toFixed(2)}</p>
                <p>Componente Y: ${f.y.toFixed(2)}</p>
            `).join('')}
            <h3>Resultado Final</h3>
            <p>Magnitude Resultante: ${magnitudeResultante.toFixed(2)}</p>
            <p>Ângulo Resultante: ${anguloResultante.toFixed(2)}°</p>
        `;
            });
        });


        const { PDFDocument, rgb } = PDFLib;

        // Função para desenhar uma linha da tabela no PDF
        function drawTableRow(page, y, data) {
            const rowHeight = 20;
            const columnWidth1 = 120;
            const columnWidth2 = 120;
            const columnWidth3 = 120;
            const columnWidth4 = 120;

            // Desenha retângulo para coluna 1
            page.drawRectangle({
                x: 50,
                y: y,
                width: columnWidth1,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(data.forca, { x: 55, y: y + 5, size: 12 });

            // Desenha retângulo para coluna 2
            page.drawRectangle({
                x: 50 + columnWidth1,
                y: y,
                width: columnWidth2,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(`${data.angulo}°`, { x: 55 + columnWidth1, y: y + 5, size: 12 });

            // Desenha retângulo para coluna 3
            page.drawRectangle({
                x: 50 + columnWidth1 + columnWidth2,
                y: y,
                width: columnWidth3,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(`${data.magnitude.toFixed(2)}`, { x: 55 + columnWidth1 + columnWidth2, y: y + 5, size: 12 });

            // Desenha retângulo para coluna 4
            page.drawRectangle({
                x: 50 + columnWidth1 + columnWidth2 + columnWidth3,
                y: y,
                width: columnWidth4,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(`${data.anguloResultante ? data.anguloResultante.toFixed(2) : 'N/A'}°`, { x: 55 + columnWidth1 + columnWidth2 + columnWidth3, y: y + 5, size: 12 });
        }

        document.getElementById('generatePdf').addEventListener('click', async function () {
            const doc = await PDFDocument.create();
            const page = doc.addPage([600, 500]);

            page.drawText('Calculadora de Esforço Urbano', { x: 50, y: 480, size: 24, color: rgb(0, 0, 0) });

            page.drawText('Forças e Resultados', { x: 50, y: 450, size: 18, color: rgb(0, 0, 0) });

            const tableStartY = 430;
            const rowHeight = 20;
            const columnWidth1 = 120;
            const columnWidth2 = 120;
            const columnWidth3 = 120;
            const columnWidth4 = 120;

            page.drawRectangle({
                x: 50,
                y: tableStartY,
                width: columnWidth1 + columnWidth2 + columnWidth3 + columnWidth4,
                height: rowHeight * 6,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });

            // Cabeçalho da tabela
            page.drawRectangle({
                x: 50,
                y: tableStartY,
                width: columnWidth1,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText('Força', { x: 55, y: tableStartY + 5, size: 12 });

            page.drawRectangle({
                x: 50 + columnWidth1,
                y: tableStartY,
                width: columnWidth2,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText('Ângulo', { x: 55 + columnWidth1, y: tableStartY + 5, size: 12 });

            page.drawRectangle({
                x: 50 + columnWidth1 + columnWidth2,
                y: tableStartY,
                width: columnWidth3,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText('Magnitude', { x: 55 + columnWidth1 + columnWidth2, y: tableStartY + 5, size: 12 });

            page.drawRectangle({
                x: 50 + columnWidth1 + columnWidth2 + columnWidth3,
                y: tableStartY,
                width: columnWidth4,
                height: rowHeight,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText('Ângulo Resultante', { x: 55 + columnWidth1 + columnWidth2 + columnWidth3, y: tableStartY + 5, size: 12 });

            let currentY = tableStartY - rowHeight;
            const forces = window.pdfData.forcas || [];

            forces.forEach(force => {
                drawTableRow(page, currentY, {
                    forca: `Força ${force.numero}`,
                    angulo: force.angulo,
                    magnitude: force.magnitude,
                    anguloResultante: force.anguloResultante
                });
                currentY -= rowHeight;
            });

            page.drawText('Resultado Final', { x: 50, y: currentY - 20, size: 18, color: rgb(0, 0, 0) });

            page.drawText(`Magnitude Resultante: ${window.pdfData.magnitude.toFixed(2)}`, { x: 50, y: currentY - 50, size: 12 });
            page.drawText(`Ângulo Resultante: ${window.pdfData.anguloResultante.toFixed(2)}°`, { x: 50, y: currentY - 70, size: 12 });

            const pdfBytes = await doc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'resultado.pdf';
            link.click();
        });

    </script>
</body>

</html>