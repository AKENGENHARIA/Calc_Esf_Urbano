<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Esforço Urbano</title>
    <link rel="shortcut icon" href="Sem título2.png" type="image/x-icon">
    <!-- <link rel="stylesheet" href="styles.css"> -->
    <script src="https://unpkg.com/pdf-lib@1.16.0/dist/pdf-lib.min.js"></script>



    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('img/fundo-poste.jpg');
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .cabecalho ul {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .cabecalho ul a {
            text-decoration: none;
            font-weight: 900;
            color: black;
            border-bottom: solid 2px;
        }

        .cabecalho ul a:hover {
            color: red;
            font-size: 20px;
        }

        h1 {
            color: #0044cc;
            margin-top: 20px;
            text-align: center;
        }

        .container {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            width: 100%;
            max-width: 1200px;
            margin: 20px 0;
        }

        .force-input {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
            padding: 15px;
            width: 180px;
            box-sizing: border-box;
            min-width: 150px;
        }

        .force-input h3 {
            color: #0044cc;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .vao-ang,
        .RedeDentrega,
        .estaio,
        .usoMutuo {
            margin-bottom: 10px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 12px;
        }

        input[type="number"],
        select {
            width: 100%;
            padding: 6px;
            margin-bottom: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 12px;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .buttons button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            background-color: #0044cc;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .buttons button:hover {
            background-color: #0033a0;
        }

        .results {
            margin-top: 20px;
            text-align: center;
        }

        .results .value {
            font-size: 20px;
            font-weight: bold;
            color: #0044cc;
        }

        .chart {
            margin-top: 30px;
            width: 100%;
            max-width: 500px;
        }

        label {
            align-items: center;
        }

        .button {
            --bezier: cubic-bezier(0.22, 0.61, 0.36, 1);
            --edge-light: hsla(0, 0%, 50%, 0.8);
            --text-light: rgba(255, 255, 255, 0.4);
            --back-color: 240, 40%;

            cursor: pointer;
            padding: 0.7em 1em;
            border-radius: 0.5em;
            min-height: 2.4em;
            min-width: 3em;
            display: inline;
            align-items: center;
            font-size: 18px;
            letter-spacing: 0.05em;
            line-height: 1;
            font-weight: bold;
            margin: 10px;

            background: linear-gradient(140deg,
                    hsla(var(--back-color), 50%, 1) min(2em, 20%),
                    hsla(var(--back-color), 50%, 0.6) min(8em, 100%));
            color: hsla(0, 0%, 90%);
            border: 0;
            box-shadow: inset 0.4px 1px 4px var(--edge-light);

            transition: all 0.1s var(--bezier);
        }

        .button:hover {
            --edge-light: hsla(0, 0%, 50%, 1);
            text-shadow: 0px 0px 10px var(--text-light);
            box-shadow: inset 0.4px 1px 4px var(--edge-light),
                2px 4px 8px hsla(0, 0%, 0%, 0.295);
            transform: scale(1.1);
        }

        .button:active {
            --text-light: rgba(255, 255, 255, 1);

            background: linear-gradient(140deg,
                    hsla(var(--back-color), 50%, 1) min(2em, 20%),
                    hsla(var(--back-color), 50%, 0.6) min(8em, 100%));
            box-shadow: inset 0.4px 1px 8px var(--edge-light),
                0px 0px 8px hsla(var(--back-color), 50%, 0.6);
            text-shadow: 0px 0px 20px var(--text-light);
            color: hsla(0, 0%, 100%, 1);
            letter-spacing: 0.1em;
            transform: scale(1);
        }
    </style>
</head>

<body>

    <header class="cabecalho">
        <ul>
            <a href="">Informação</a>
            <a href="">Poste</a>
            <a href="">Calculo</a>
        </ul>
    </header>
    <h1>Calculadora de Esforço Urbano</h1>
    <div class="container">
        <!-- Layout Força 1 -->
        <div class="force-input" id="F1">
            <h3>FORÇA 1</h3>
            <section class="vao-ang">
                <label for="span1_F1">Vão:</label>
                <input type="number" id="span1_F1" value="">
                <label for="angle1_F1">Ângulo:</label>
                <input type="number" id="angle1_F1" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F1" id="rede_mt_F1">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
                <p>Rede BT</p>
                <select name="rede_bt_F1" id="rede_bt_F1">
                    <option value="0">Selecione</option>
                    <option value="114">2x1x35+70</option>
                    <option value="181">2x1x70+70</option>
                    <option value="161">3x1x35+70</option>
                    <option value="245">3x1x70+70</option>
                    <option value="381">3x1x120+70</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4(4)</option>
                    <option value="174">3#4(4)</option>
                    <option value="92">1#2</option>
                    <option value="183">2#2(4)</option>
                    <option value="184">2#2(2)</option>
                    <option value="275">3#2(4)</option>
                    <option value="276">3#2(2)</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0(2)</option>
                    <option value="435">3#1/0(2)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0(1/0)</option>
                    <option value="879">3#4/0(1/0)</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336(4/0)</option>
                    <option value="1401">3#336(4/0)</option>
                </select>
                <p>Nível da cruzeta MT</p>
                <select name="nivel_cruzeta_mt_F1" id="nivel_cruzeta_mt_F1">
                    <option value="1">NIVEL 1</option>
                    <option value="0.96">NIVEL 2</option>
                    <option value="0.86">NIVEL 3</option>
                </select>
            </div>
            <section class="estaio estaio-section">
                <h3>Estaio 1</h3>
                <input type="radio" id="estaio_sim1" name="estaio1" value="sim"> Sim
                <input type="radio" id="estaio_nao1" name="estaio1" value="nao"> Não
                <select id="estaio_F1">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
                <input type="number" id="estaio_number1">
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F1">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>

        <!-- Layout Força 2 -->
        <div class="force-input" id="F2">
            <h3>FORÇA 2</h3>
            <section class="vao-ang">
                <label for="span1_F2">Vão:</label>
                <input type="number" id="span1_F2" value="">
                <label for="angle2_F2">Ângulo:</label>
                <input type="number" id="angle2_F2" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F2" id="rede_mt_F2">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
                <p>Rede BT</p>
                <select name="rede_bt_F2" id="rede_bt_F2">
                    <option value="0">Selecione</option>
                    <option value="114">2x1x35+70</option>
                    <option value="181">2x1x70+70</option>
                    <option value="161">3x1x35+70</option>
                    <option value="245">3x1x70+70</option>
                    <option value="381">3x1x120+70</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4(4)</option>
                    <option value="174">3#4(4)</option>
                    <option value="92">1#2</option>
                    <option value="183">2#2(4)</option>
                    <option value="184">2#2(2)</option>
                    <option value="275">3#2(4)</option>
                    <option value="276">3#2(2)</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0(2)</option>
                    <option value="435">3#1/0(2)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0(1/0)</option>
                    <option value="879">3#4/0(1/0)</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336(4/0)</option>
                    <option value="1401">3#336(4/0)</option>
                </select>
                <p>Nível da cruzeta MT</p>
                <select name="nivel_cruzeta_mt_F2" id="nivel_cruzeta_mt_F2">
                    <option value="1">NIVEL 1</option>
                    <option value="0.96">NIVEL 2</option>
                    <option value="0.86">NIVEL 3</option>
                </select>
            </div>
            <section class="estaio estaio-section">
                <h3>Estaio 2</h3>
                <input type="radio" id="estaio_sim2" name="estaio2" value="sim"> Sim
                <input type="radio" id="estaio_nao2" name="estaio2" value="nao"> Não
                <select id="estaio_F2">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
                <input type="number" id="estaio_number2">
            </section>

            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F2">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>

        <!-- Layout Força 3 -->
        <div class="force-input" id="F3">
            <h3>FORÇA 3</h3>
            <section class="vao-ang">
                <label for="span3_F3">Vão:</label>
                <input type="number" id="span3_F3" value="">
                <label for="angle3_F3">Ângulo:</label>
                <input type="number" id="angle3_F3" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F3" id="rede_mt_F3">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
            </div>
            <p>Rede BT</p>
            <select name="rede_bt_F3" id="rede_bt_F3">
                <option value="0">Selecione</option>
                <option value="114">2x1x35+70</option>
                <option value="181">2x1x70+70</option>
                <option value="161">3x1x35+70</option>
                <option value="245">3x1x70+70</option>
                <option value="381">3x1x120+70</option>
                <option value="58">1#4</option>
                <option value="116">2#4(4)</option>
                <option value="174">3#4(4)</option>
                <option value="92">1#2</option>
                <option value="183">2#2(4)</option>
                <option value="184">2#2(2)</option>
                <option value="275">3#2(4)</option>
                <option value="276">3#2(2)</option>
                <option value="145">1#1/0</option>
                <option value="290">2#1/0(2)</option>
                <option value="435">3#1/0(2)</option>
                <option value="293">1#4/0</option>
                <option value="586">2#4/0(1/0)</option>
                <option value="879">3#4/0(1/0)</option>
                <option value="467">1#336</option>
                <option value="934">2#336(4/0)</option>
                <option value="1401">3#336(4/0)</option>
            </select>
            <p>Nível da cruzeta MT</p>
            <select name="nivel_cruzeta_mt_F3" id="nivel_cruzeta_mt_F3">
                <option value="1">NIVEL 1</option>
                <option value="0.96">NIVEL 2</option>
                <option value="0.86">NIVEL 3</option>
            </select>
            <section class="estaio estaio-section">
                <h3>Estaio 3</h3>
                <input type="radio" id="estaio_sim3" name="estaio3" value="sim"> Sim
                <input type="radio" id="estaio_nao3" name="estaio3" value="nao"> Não
                <select id="estaio_F3">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
                <input type="number" id="estaio_number3">
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F3">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>

        <!-- Layout Força 4 -->
        <div class="force-input" id="F4">
            <h3>FORÇA 4</h3>
            <section class="vao-ang">
                <label for="span4_F4">Vão:</label>
                <input type="number" id="span4_F4" value="">
                <label for="angle4_F4">Ângulo:</label>
                <input type="number" id="angle4_F4" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F4" id="rede_mt_F4">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
            </div>
            <p>Rede BT</p>
            <select name="rede_bt_F4" id="rede_bt_F4">
                <option value="0">Selecione</option>
                <option value="114">2x1x35+70</option>
                <option value="181">2x1x70+70</option>
                <option value="161">3x1x35+70</option>
                <option value="245">3x1x70+70</option>
                <option value="381">3x1x120+70</option>
                <option value="58">1#4</option>
                <option value="116">2#4(4)</option>
                <option value="174">3#4(4)</option>
                <option value="92">1#2</option>
                <option value="183">2#2(4)</option>
                <option value="184">2#2(2)</option>
                <option value="275">3#2(4)</option>
                <option value="276">3#2(2)</option>
                <option value="145">1#1/0</option>
                <option value="290">2#1/0(2)</option>
                <option value="435">3#1/0(2)</option>
                <option value="293">1#4/0</option>
                <option value="586">2#4/0(1/0)</option>
                <option value="879">3#4/0(1/0)</option>
                <option value="467">1#336</option>
                <option value="934">2#336(4/0)</option>
                <option value="1401">3#336(4/0)</option>
            </select>
            <p>Nível da cruzeta MT</p>
            <select name="nivel_cruzeta_mt_F4" id="nivel_cruzeta_mt_F4">
                <option value="1">NIVEL 1</option>
                <option value="0.96">NIVEL 2</option>
                <option value="0.86">NIVEL 3</option>
            </select>
            <section class="estaio estaio-section">
                <h3>Estaio 4</h3>
                <input type="radio" id="estaio_sim4" name="estaio4" value="sim"> Sim
                <input type="radio" id="estaio_nao4" name="estaio4" value="nao"> Não
                <select id="estaio_F4">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
                <input type="number" id="estaio_number4">
            </section>

            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F4">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>


        <!-- Layout Força 5 -->
        <div class="force-input" id="F5">
            <h3>FORÇA 5</h3>
            <section class="vao-ang">
                <label for="span5_F5">Vão:</label>
                <input type="number" id="span5_F5" value="">
                <label for="angle5_F5">Ângulo:</label>
                <input type="number" id="angle5_F5" value="">
            </section>
            <div class="RedeDentrega">
                <h3>Rede de Energia</h3>
                <p>Rede MT</p>
                <select name="rede_mt_F5" id="rede_mt_F5">
                    <option value="0">Selecione</option>
                    <option value="415">3#50+9,5</option>
                    <option value="255">1#50+9,6</option>
                    <option value="517">3#150+9,7</option>
                    <option value="58">1#4</option>
                    <option value="116">2#4</option>
                    <option value="174">3#4</option>
                    <option value="92">1#2</option>
                    <option value="184">2#2</option>
                    <option value="276">3#2</option>
                    <option value="145">1#1/0</option>
                    <option value="290">2#1/0</option>
                    <option value="435">3#1/0 (1/0)</option>
                    <option value="293">1#4/0</option>
                    <option value="586">2#4/0</option>
                    <option value="879">3#4/0</option>
                    <option value="467">1#336</option>
                    <option value="934">2#336</option>
                    <option value="1401">3#336</option>
                </select>
            </div>
            <p>Rede BT</p>
            <select name="rede_bt_F5" id="rede_bt_F5">
                <option value="0">Selecione</option>
                <option value="114">2x1x35+70</option>
                <option value="181">2x1x70+70</option>
                <option value="161">3x1x35+70</option>
                <option value="245">3x1x70+70</option>
                <option value="381">3x1x120+70</option>
                <option value="58">1#4</option>
                <option value="116">2#4(4)</option>
                <option value="174">3#4(4)</option>
                <option value="92">1#2</option>
                <option value="183">2#2(4)</option>
                <option value="184">2#2(2)</option>
                <option value="275">3#2(4)</option>
                <option value="276">3#2(2)</option>
                <option value="145">1#1/0</option>
                <option value="290">2#1/0(2)</option>
                <option value="435">3#1/0(2)</option>
                <option value="293">1#4/0</option>
                <option value="586">2#4/0(1/0)</option>
                <option value="879">3#4/0(1/0)</option>
                <option value="467">1#336</option>
                <option value="934">2#336(4/0)</option>
                <option value="1401">3#336(4/0)</option>
            </select>
            <p>Nível da cruzeta MT</p>
            <select name="nivel_cruzeta_mt_F5" id="nivel_cruzeta_mt_F5">
                <option value="1">NIVEL 1</option>
                <option value="0.96">NIVEL 2</option>
                <option value="0.86">NIVEL 3</option>
            </select>
            <section class="estaio estaio-section">
                <h3>Estaio 5</h3>
                <input type="radio" id="estaio_sim5" name="estaio5" value="sim"> Sim
                <input type="radio" id="estaio_nao5" name="estaio5" value="nao"> Não
                <select id="estaio_F5">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
                <input type="number" id="estaio_number5">
            </section>
            <section class="usoMutuo">
                <h3>Uso Mútuo</h3>
                <select id="usoMutuo_F5">
                    <option value="opcao1">Opção 1</option>
                    <option value="opcao2">Opção 2</option>
                </select>
            </section>
        </div>
    </div>

    <!-- Buttons -->
    <div id="buttons">
        <button class="button" id="calculate">Calcular</button>
        <button class="button" id="generatePdf">Gerar PDF</button>
       
        <div id="resultModal" class="modal">
            <div class="modal-content">
                <!-- Resultados -->
                <div id="resultadoModal"></div>
                <!-- Gráfico dos vetores -->
                <canvas id="vectorChart"></canvas>
            </div>
        </div>
    
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      

    <style>
        /* Estilos do Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            font-family: Arial, sans-serif;
            box-shadow: 0px 4px 8px rgba(0,0,0,0.2);
        }
        h3, h4 {
            color: #333;
        }
        p {
            line-height: 1.6;
        }
        .force-box {
            padding: 10px;
            border: 1px solid #ccc;
            margin-bottom: 15px;
            border-radius: 5px;
        }
        #vectorChart {
            margin-top: 20px;
            max-width: 100%;
        }
    </style>

    <script>
        // Função para configurar visibilidade dos campos para uma seção estaio
        function setupEstaio(section) {
            const estaioSim = document.getElementById(`estaio_sim${section}`);
            const estaioNao = document.getElementById(`estaio_nao${section}`);
            const estaioF = document.getElementById(`estaio_F${section}`);
            const estaioNumber = document.getElementById(`estaio_number${section}`);

            if (!estaioSim || !estaioNao || !estaioF || !estaioNumber) {
                console.error(`Elementos para Estaio ${section} não encontrados.`);
                return;
            }

            estaioF.style.display = 'none'; // Inicialmente oculto
            estaioNumber.style.display = 'none'; // Inicialmente oculto

            estaioSim.addEventListener('change', () => {
                if (estaioSim.checked) {
                    estaioF.style.display = 'block';
                    estaioNumber.style.display = 'block';
                }
            });

            estaioNao.addEventListener('change', () => {
                if (estaioNao.checked) {
                    estaioF.style.display = 'none';
                    estaioNumber.style.display = 'none';
                }
            });
        }

        // Inicialize todas as seções de estaio
        for (let i = 1; i <= 5; i++) {
            setupEstaio(i);
        }
    </script>
    <script>

document.addEventListener('DOMContentLoaded', function () {
    var btn = document.getElementById('calculate');
    var modal = document.getElementById('resultModal');
    var resultadoModal = document.getElementById('resultadoModal');
    var vectorChart;

    if (!btn || !modal || !resultadoModal) {
        console.error("Elementos necessários não foram encontrados.");
        return;
    }

    btn.addEventListener('click', function () {
        // Força 1
        let ang1 = 0, redeMt1 = 415, redeBt1 = 10, nivelMt1 = 0, vao1 = 0;
        let somaF1 = (redeMt1 * nivelMt1) + redeBt1;
        let rad1 = ang1 * Math.PI / 180;
        let x1 = somaF1 * Math.cos(rad1);
        let y1 = somaF1 * Math.sin(rad1);

        // Força 2
        let ang2 = 45, redeMt2 = 255, redeBt2 = 0, nivelMt2 = 0, vao2 = 0;
        let somaF2 = (redeMt2 * nivelMt2) + redeBt2;
        let rad2 = ang2 * Math.PI / 180;
        let x2 = somaF2 * Math.cos(rad2);
        let y2 = somaF2 * Math.sin(rad2);

        // Força 3
        let ang3 = 90, redeMt3 = 517, redeBt3 = 0, nivelMt3 = 0, vao3 = 31;
        let somaF3 = (redeMt3 * nivelMt3) + redeBt3;
        let rad3 = ang3 * Math.PI / 180;
        let x3 = somaF3 * Math.cos(rad3);
        let y3 = somaF3 * Math.sin(rad3);

        // Força 4
        let ang4 = 135, redeMt4 = 58, redeBt4 = 0, nivelMt4 = 0, vao4 = 32;
        let somaF4 = (redeMt4 * nivelMt4) + redeBt4;
        let rad4 = ang4 * Math.PI / 180;
        let x4 = somaF4 * Math.cos(rad4);
        let y4 = somaF4 * Math.sin(rad4);

        // Força 5
        let ang5 = 180, redeMt5 = 174, redeBt5 = 0, nivelMt5 = 0, vao5 = 33;
        let somaF5 = (redeMt5 * nivelMt5) + redeBt5;
        let rad5 = ang5 * Math.PI / 180;
        let x5 = somaF5 * Math.cos(rad5);
        let y5 = somaF5 * Math.sin(rad5);

        // Resultado Final
        let xResult = x1 + x2 + x3 + x4 + x5;
        let yResult = y1 + y2 + y3 + y4 + y5;
        let magnitudeResultante = Math.sqrt(xResult * xResult + yResult * yResult);
        let anguloResultante = Math.atan2(yResult, xResult) * 180 / Math.PI;

        // Atualiza o conteúdo do modal
        resultadoModal.innerHTML = `
            <h3>Resultados das Forças</h3>

            <div class="force-box">
                <h4>Força 1</h4>
                <p><strong>Ângulo:</strong> ${ang1}°</p>
                <p><strong>Vão:</strong> ${vao1}</p>
                <p><strong>Rede MT:</strong> ${redeMt1}</p>
                <p><strong>Rede BT:</strong> ${redeBt1}</p>
                <p><strong>Magnitude:</strong> ${somaF1.toFixed(2)}</p>
                <p><strong>Componente X:</strong> ${x1.toFixed(2)}</p>
                <p><strong>Componente Y:</strong> ${y1.toFixed(2)}</p>
            </div>

            <div class="force-box">
                <h4>Força 2</h4>
                <p><strong>Ângulo:</strong> ${ang2}°</p>
                <p><strong>Vão:</strong> ${vao2}</p>
                <p><strong>Rede MT:</strong> ${redeMt2}</p>
                <p><strong>Rede BT:</strong> ${redeBt2}</p>
                <p><strong>Magnitude:</strong> ${somaF2.toFixed(2)}</p>
                <p><strong>Componente X:</strong> ${x2.toFixed(2)}</p>
                <p><strong>Componente Y:</strong> ${y2.toFixed(2)}</p>
            </div>

            <div class="force-box">
                <h4>Força 3</h4>
                <p><strong>Ângulo:</strong> ${ang3}°</p>
                <p><strong>Vão:</strong> ${vao3}</p>
                <p><strong>Rede MT:</strong> ${redeMt3}</p>
                <p><strong>Rede BT:</strong> ${redeBt3}</p>
                <p><strong>Magnitude:</strong> ${somaF3.toFixed(2)}</p>
                <p><strong>Componente X:</strong> ${x3.toFixed(2)}</p>
                <p><strong>Componente Y:</strong> ${y3.toFixed(2)}</p>
            </div>

            <div class="force-box">
                <h4>Força 4</h4>
                <p><strong>Ângulo:</strong> ${ang4}°</p>
                <p><strong>Vão:</strong> ${vao4}</p>
                <p><strong>Rede MT:</strong> ${redeMt4}</p>
                <p><strong>Rede BT:</strong> ${redeBt4}</p>
                <p><strong>Magnitude:</strong> ${somaF4.toFixed(2)}</p>
                <p><strong>Componente X:</strong> ${x4.toFixed(2)}</p>
                <p><strong>Componente Y:</strong> ${y4.toFixed(2)}</p>
            </div>

            <div class="force-box">
                <h4>Força 5</h4>
                <p><strong>Ângulo:</strong> ${ang5}°</p>
                <p><strong>Vão:</strong> ${vao5}</p>
                <p><strong>Rede MT:</strong> ${redeMt5}</p>
                <p><strong>Rede BT:</strong> ${redeBt5}</p>
                <p><strong>Magnitude:</strong> ${somaF5.toFixed(2)}</p>
                <p><strong>Componente X:</strong> ${x5.toFixed(2)}</p>
                <p><strong>Componente Y:</strong> ${y5.toFixed(2)}</p>
            </div>

            <h3>Resultado Final</h3>
            <p><strong>Magnitude Resultante:</strong> ${magnitudeResultante.toFixed(2)}</p>
            <p><strong>Ângulo Resultante:</strong> ${anguloResultante.toFixed(2)}°</p>
        `;

        // Mostra o modal
        modal.style.display = "block";

        // Desenha o gráfico de vetores usando Chart.js
        const ctx = document.getElementById('vectorChart').getContext('2d');
        if (vectorChart) {
            vectorChart.destroy(); // Destroi o gráfico anterior, se existir
        }
        vectorChart = new Chart(ctx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Força 1',
                    data: [{x: 0, y: 0}, {x: x1, y: y1}],
                    borderColor: 'blue',
                    showLine: true,
                    fill: false
                },
                {
                    label: 'Força 2',
                    data: [{x: 0, y: 0}, {x: x2, y: y2}],
                    borderColor: 'green',
                    showLine: true,
                    fill: false
                },
                {
                    label: 'Força 3',
                    data: [{x: 0, y: 0}, {x: x3, y: y3}],
                    borderColor: 'red',
                    showLine: true,
                    fill: false
                },
                {
                    label: 'Força 4',
                    data: [{x: 0, y: 0}, {x: x4, y: y4}],
                    borderColor: 'purple',
                    showLine: true,
                    fill: false
                },
                {
                    label: 'Força 5',
                    data: [{x: 0, y: 0}, {x: x5, y: y5}],
                    borderColor: 'orange',
                    showLine: true,
                    fill: false
                },
                {
                    label: 'Resultado',
                    data: [{x: 0, y: 0}, {x: xResult, y: yResult}],
                    borderColor: 'black',
                    showLine: true,
                    fill: false,
                    borderDash: [5, 5]
                }]
            },
            options: {
                scales: {
                    x: {beginAtZero: true},
                    y: {beginAtZero: true}
                }
            }
        });
    });

    // Fecha o modal quando o usuário clicar fora do conteúdo do modal
    window.onclick = function(event) {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    }
});




        const { PDFDocument, rgb } = PDFLib;

        function drawTableRow(page, y, data, isHeader = false) {
            const rowHeight = 25;
            const columnWidth1 = 100;
            const columnWidth2 = 100;
            const columnWidth3 = 100;
            const columnWidth4 = 100;
            const textColor = rgb(0.2, 0.2, 0.2);
            const headerColor = rgb(0.9, 0.9, 0.9);

            // Garantir que o valor da magnitude seja um número
            const magnitude = isNaN(data.magnitude) ? 0 : data.magnitude;

            // Garantir que o valor do ângulo resultante seja um número
            const anguloResultante = isNaN(data.anguloResultante) ? 'N/A' : data.anguloResultante.toFixed(2);

            // Desenha retângulo para cada célula (com cor de fundo para o cabeçalho)
            page.drawRectangle({
                x: 50,
                y: y,
                width: columnWidth1,
                height: rowHeight,
                color: isHeader ? headerColor : undefined,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(data.forca, { x: 55, y: y + 8, size: 12, color: textColor });

            page.drawRectangle({
                x: 50 + columnWidth1,
                y: y,
                width: columnWidth2,
                height: rowHeight,
                color: isHeader ? headerColor : undefined,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(`${data.angulo}°`, { x: 55 + columnWidth1, y: y + 8, size: 12, color: textColor });

            page.drawRectangle({
                x: 50 + columnWidth1 + columnWidth2,
                y: y,
                width: columnWidth3,
                height: rowHeight,
                color: isHeader ? headerColor : undefined,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(`${magnitude.toFixed(2)}`, { x: 55 + columnWidth1 + columnWidth2, y: y + 8, size: 12, color: textColor });

            page.drawRectangle({
                x: 50 + columnWidth1 + columnWidth2 + columnWidth3,
                y: y,
                width: columnWidth4,
                height: rowHeight,
                color: isHeader ? headerColor : undefined,
                borderColor: rgb(0, 0, 0),
                borderWidth: 1
            });
            page.drawText(`${anguloResultante}°`, {
                x: 55 + columnWidth1 + columnWidth2 + columnWidth3,
                y: y + 8,
                size: 12,
                color: textColor
            });
        }

        document.getElementById('generatePdf').addEventListener('click', async function () {
            const pdfDoc = await PDFDocument.create();
            const page = pdfDoc.addPage([600, 500]);

            // Definir título e subtítulo
            page.drawText('Calculadora de Esforço Urbano', { x: 50, y: 480, size: 24, color: rgb(0.2, 0.2, 0.2) });
            page.drawText('Forças e Resultados', { x: 50, y: 450, size: 18, color: rgb(0.2, 0.2, 0.2) });

            // Posição inicial da tabela
            const tableStartY = 430;
            const rowHeight = 25;

            // Cabeçalho da tabela
            drawTableRow(page, tableStartY, { forca: 'Força', angulo: 'Ângulo', magnitude: 'Magnitude', anguloResultante: 'Ângulo Resultante' }, true);

            let currentY = tableStartY - rowHeight;
            const forces = window.pdfData?.forcas || [];

            // Linhas da tabela com dados
            forces.forEach(force => {
                drawTableRow(page, currentY, {
                    forca: `Força ${force.numero}`,
                    angulo: force.angulo,
                    magnitude: force.magnitude,
                    anguloResultante: force.anguloResultante
                });
                currentY -= rowHeight;
            });

            // Resultado Final
            page.drawText('Resultado Final', { x: 50, y: currentY - 20, size: 18, color: rgb(0.2, 0.2, 0.2) });
            page.drawText(`Magnitude Resultante: ${window.pdfData?.magnitudeResultante?.toFixed(2) || '0.00'}`, { x: 50, y: currentY - 50, size: 14, color: rgb(0, 0, 0) });
            page.drawText(`Ângulo Resultante: ${window.pdfData?.anguloResultante?.toFixed(2) || '0.00'}°`, { x: 50, y: currentY - 70, size: 14, color: rgb(0, 0, 0) });

            // Salva o PDF e permite o download
            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'resultado.pdf';
            link.click();
        });




    </script>
</body>

</html>